<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Cloudy</title>
  
  <subtitle>Cloudy的自留地</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://www.cloudyslife.cn/"/>
  <updated>2019-04-16T07:44:21.375Z</updated>
  <id>https://www.cloudyslife.cn/</id>
  
  <author>
    <name>Cloudy</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>&#39;git&#39;</title>
    <link href="https://www.cloudyslife.cn/2019/04/16/git/"/>
    <id>https://www.cloudyslife.cn/2019/04/16/git/</id>
    <published>2019-04-16T07:39:37.000Z</published>
    <updated>2019-04-16T07:44:21.375Z</updated>
    
    <content type="html"><![CDATA[<p>git add . //添加所有文件  </p><p>git commit -m “message”  </p><p><strong>git reset –soft HEAD^</strong>   </p><p>HEAD^的意思是上一个版本，也可以写成HEAD~1  </p><p>如果你进行了2次commit，想都撤回，可以使用HEAD~2  </p><h2 id="–mixed"><a href="#–mixed" class="headerlink" title="–mixed"></a>–mixed</h2><p>意思是：不删除工作空间改动代码，撤销commit，并且撤销git add . 操作  </p><p>这个为默认参数,git reset –mixed HEAD^ 和 git reset HEAD^ 效果是一样的。</p><h2 id="–soft"><a href="#–soft" class="headerlink" title="–soft"></a>–soft</h2><p>不删除工作空间改动代码，撤销commit，不撤销git add . </p><h2 id="–hard"><a href="#–hard" class="headerlink" title="–hard"></a>–hard</h2><p>删除工作空间改动代码，撤销commit，撤销git add . </p><p>注意完成这个操作后，就恢复到了上一次的commit状态。</p><h3 id="顺便说一下，如果commit注释写错了，只是想改一下注释，只需要："><a href="#顺便说一下，如果commit注释写错了，只是想改一下注释，只需要：" class="headerlink" title="顺便说一下，如果commit注释写错了，只是想改一下注释，只需要："></a>顺便说一下，如果commit注释写错了，只是想改一下注释，只需要：</h3><p>git commit –amend</p><p>此时会进入默认vim编辑器，修改注释完毕后保存就好了。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;git add . //添加所有文件  &lt;/p&gt;
&lt;p&gt;git commit -m “message”  &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;git reset –soft HEAD^&lt;/strong&gt;   &lt;/p&gt;
&lt;p&gt;HEAD^的意思是上一个版本，也可以写成HEAD~1 
      
    
    </summary>
    
      <category term="git" scheme="https://www.cloudyslife.cn/categories/git/"/>
    
    
      <category term="git" scheme="https://www.cloudyslife.cn/tags/git/"/>
    
  </entry>
  
  <entry>
    <title>react</title>
    <link href="https://www.cloudyslife.cn/2019/03/28/react/"/>
    <id>https://www.cloudyslife.cn/2019/03/28/react/</id>
    <published>2019-03-28T03:16:25.000Z</published>
    <updated>2019-03-28T05:40:47.375Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>推荐一本书籍，这本书通过一个小的demo，一步步实现redux，react-redux。</p><p><a href="http://huziketang.mangojuice.top/books/react/" target="_blank" rel="noopener">《React.js 小书》</a></p><a id="more"></a>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;p&gt;推荐一本书籍，这本书通过一个小的demo，一步步实现redux，react-redux。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://huziketang.mangojuice.top/books/react/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;《React.js 小书》&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="前端" scheme="https://www.cloudyslife.cn/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="react" scheme="https://www.cloudyslife.cn/tags/react/"/>
    
      <category term="redux" scheme="https://www.cloudyslife.cn/tags/redux/"/>
    
      <category term="react-redux" scheme="https://www.cloudyslife.cn/tags/react-redux/"/>
    
  </entry>
  
  <entry>
    <title>es6</title>
    <link href="https://www.cloudyslife.cn/2019/03/19/es6/"/>
    <id>https://www.cloudyslife.cn/2019/03/19/es6/</id>
    <published>2019-03-19T05:27:29.000Z</published>
    <updated>2019-03-19T07:03:48.938Z</updated>
    
    <content type="html"><![CDATA[<h3 id="let"><a href="#let" class="headerlink" title="let"></a>let</h3><ul><li>代码块内有效</li><li>无变量提升</li><li>不能重复声明</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;let&quot;&gt;&lt;a href=&quot;#let&quot; class=&quot;headerlink&quot; title=&quot;let&quot;&gt;&lt;/a&gt;let&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;代码块内有效&lt;/li&gt;
&lt;li&gt;无变量提升&lt;/li&gt;
&lt;li&gt;不能重复声明&lt;/li&gt;
&lt;/ul&gt;

      
    
    </summary>
    
    
      <category term="ES6" scheme="https://www.cloudyslife.cn/tags/ES6/"/>
    
  </entry>
  
  <entry>
    <title>Html/Css相关</title>
    <link href="https://www.cloudyslife.cn/2019/03/19/Html-Css%E7%9B%B8%E5%85%B3/"/>
    <id>https://www.cloudyslife.cn/2019/03/19/Html-Css相关/</id>
    <published>2019-03-19T04:17:18.000Z</published>
    <updated>2019-03-20T02:50:02.308Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>关于原生Html/Css相关的，兼容，样式等问题</p><a id="more"></a><h3 id="box-shadow"><a href="#box-shadow" class="headerlink" title="box-shadow"></a>box-shadow</h3><p><code>box-shadow:1px 2px 3px 4px #ccc inset；</code></p><p>以上六个值的含义：1px  从原点开始，沿x轴正方向的长度（倘若为负值，为沿x轴负方向的长度）；</p><p>　　　　　　　　　2px  从原点开始，沿y轴正方向的长度；（倘若为负值，为沿y轴负方向的长度）；</p><p>　　　　　　　　　3px  阴影的模糊度，只允许为正值；</p><p>　　　　　　　　　4px  阴影扩展半径；</p><p>　　　　　　　　　#ccc  阴影颜色；</p><p>　　　　　　　　　 inset  设置为内阴影（如果不写这个值，默认为外阴影）；</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">box-shadow</span>:    0<span class="selector-tag">px</span> <span class="selector-tag">-10px</span> 0<span class="selector-tag">px</span> 0<span class="selector-tag">px</span> <span class="selector-id">#ff0000</span>,   <span class="comment">/*上边阴影  红色*/</span></span><br><span class="line"></span><br><span class="line">                <span class="selector-tag">-10px</span> 0<span class="selector-tag">px</span> 0<span class="selector-tag">px</span> 0<span class="selector-tag">px</span> <span class="selector-id">#3bee17</span>,   <span class="comment">/*左边阴影  绿色*/</span></span><br><span class="line"></span><br><span class="line">                10<span class="selector-tag">px</span> 0<span class="selector-tag">px</span> 0<span class="selector-tag">px</span> 0<span class="selector-tag">px</span> <span class="selector-id">#2279ee</span>,    <span class="comment">/*右边阴影  蓝色*/</span></span><br><span class="line"></span><br><span class="line">                0<span class="selector-tag">px</span> 10<span class="selector-tag">px</span> 0<span class="selector-tag">px</span> 0<span class="selector-tag">px</span> <span class="selector-id">#eede15</span>;    <span class="comment">/*下边阴影  黄色*/</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">box-shadow</span>:    0<span class="selector-tag">px</span> <span class="selector-tag">-10px</span> 0<span class="selector-tag">px</span> 0<span class="selector-tag">px</span> <span class="selector-id">#ff0000</span>,   <span class="comment">/*上边阴影  红色*/</span></span><br><span class="line"></span><br><span class="line">                <span class="selector-tag">-10px</span> 0<span class="selector-tag">px</span> 0<span class="selector-tag">px</span> 0<span class="selector-tag">px</span> <span class="selector-id">#3bee17</span>,   <span class="comment">/*左边阴影  绿色*/</span></span><br><span class="line"></span><br><span class="line">                10<span class="selector-tag">px</span> 0<span class="selector-tag">px</span> 0<span class="selector-tag">px</span> 0<span class="selector-tag">px</span> <span class="selector-id">#2279ee</span>,    <span class="comment">/*右边阴影  蓝色*/</span></span><br><span class="line"></span><br><span class="line">                0<span class="selector-tag">px</span> 10<span class="selector-tag">px</span> 0<span class="selector-tag">px</span> 0<span class="selector-tag">px</span> <span class="selector-id">#eede15</span>;    <span class="comment">/*下边阴影  黄色*/</span></span><br></pre></td></tr></table></figure><h3 id="IE9以上-input-文本框的X和密码的眼睛图标"><a href="#IE9以上-input-文本框的X和密码的眼睛图标" class="headerlink" title="IE9以上 input 文本框的X和密码的眼睛图标"></a>IE9以上 input 文本框的X和密码的眼睛图标</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">    IE9和9以上 input 新增文本框的清空和密码输入框的眼睛显示功能 </span></span><br><span class="line"><span class="comment">    下面代码不支持IE9</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="selector-class">.login-form</span> <span class="selector-pseudo">::-ms-clear</span>, <span class="selector-class">.login-form</span> <span class="selector-pseudo">::-ms-reveal</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="input-placeholder"><a href="#input-placeholder" class="headerlink" title="input placeholder"></a>input placeholder</h3><p><strong>Firefox placeholder有一个默认的设置opacity：0.4；所以会出现一个问题，设置为#000的时候，页面上面还是没有改变</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">input</span><span class="selector-pseudo">::-webkit-input-placeholder</span>,<span class="comment">/*chorme, safari*/</span></span><br><span class="line"><span class="selector-tag">input</span><span class="selector-pseudo">:-moz-placeholder</span>,  <span class="comment">/*Firefox V18及以下*/</span></span><br><span class="line"><span class="selector-tag">input</span><span class="selector-pseudo">::-moz-placeholder</span>, <span class="comment">/*Firefox 19*/</span></span><br><span class="line"><span class="selector-tag">input</span><span class="selector-pseudo">:-ms-input-placeholder</span>  &#123; <span class="comment">/*IE 10*/</span></span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#000</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">input</span><span class="selector-pseudo">:-moz-placeholder</span>,</span><br><span class="line"><span class="selector-tag">input</span><span class="selector-pseudo">::-moz-placeholder</span> &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* scss mixin写法 */</span></span><br><span class="line">@<span class="keyword">mixin</span> placeholder &#123;</span><br><span class="line">  ::-webkit-input-placeholder &#123;@content&#125;</span><br><span class="line">  :-moz-placeholder           &#123;@content&#125;</span><br><span class="line">  ::-moz-placeholder          &#123;@content&#125;</span><br><span class="line">  :-ms-input-placeholder      &#123;@content&#125;  </span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="selector-tag">input</span> &#123;</span><br><span class="line">  @include placeholder &#123;</span><br><span class="line">    <span class="selector-tag">color</span>: <span class="selector-id">#000</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="适应手机"><a href="#适应手机" class="headerlink" title="适应手机"></a>适应手机</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- meta 参数说明</span></span><br><span class="line"><span class="comment">    width = device-width：宽度等于当前设备的宽度</span></span><br><span class="line"><span class="comment">    height = device-height：高度等于当前设备的高度</span></span><br><span class="line"><span class="comment">    initial-scale：初始的缩放比例（默认设置为1.0）</span></span><br><span class="line"><span class="comment">    minimum-scale：允许用户缩放到的最小比例（默认设置为1.0）</span></span><br><span class="line"><span class="comment">    maximum-scale：允许用户缩放到的最大比例（默认设置为1.0</span></span><br><span class="line"><span class="comment">    user-scalable：用户是否可以手动缩放（默认设置为no，因为我们不希望用户放大缩小页面） --&gt;</span></span><br></pre></td></tr></table></figure><h3 id="checkbox-默认样式修改"><a href="#checkbox-默认样式修改" class="headerlink" title="checkbox 默认样式修改"></a>checkbox 默认样式修改</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;input id="color-input-red" class="chat-button-location-radio-input" type="checkbox" name="color-input-red" value="#f0544d" /&gt;</span><br><span class="line">&lt;label  for="color-input-red"&gt;&lt;/label &gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*lable标签的大小、位置、背景颜色更改，在css选择时，“+”代表相邻元素，即当前元素的下一元素*/</span></span><br><span class="line"><span class="selector-id">#color-input-red</span>+<span class="selector-tag">label</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">2px</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(240, 84, 77, 1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*当input框为选中状态时，lable标签的样式，其中在css选择时，“：”表示当前input框的值，即checked；</span></span><br><span class="line"><span class="comment">      该部分主要对显示的“对号”的大限居中方式，显示颜色进行了设置*/</span></span><br><span class="line"><span class="selector-id">#color-input-red</span><span class="selector-pseudo">:checked+label</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">"\2714"</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">    <span class="attribute">color</span>: white;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="input光标"><a href="#input光标" class="headerlink" title="input光标"></a>input光标</h3><p>在IE中是没有办法让input的光标改变颜色的，颜色始终与背景颜色相反。</p><p>在Firefox和Chrome中，可以设置<code>color: red</code>来设置光标的颜色。也可以使用<code>caret-color: red</code>。</p><p>光标的宽度为1px。</p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;p&gt;关于原生Html/Css相关的，兼容，样式等问题&lt;/p&gt;
    
    </summary>
    
    
      <category term="Html/Css" scheme="https://www.cloudyslife.cn/tags/Html-Css/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="https://www.cloudyslife.cn/2019/03/19/hello-world/"/>
    <id>https://www.cloudyslife.cn/2019/03/19/hello-world/</id>
    <published>2019-03-19T04:10:29.603Z</published>
    <updated>2019-03-19T04:10:29.604Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><a id="more"></a><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.io/docs/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;documentation&lt;/a&gt; for more info. If you get any problems when using Hexo, you can find the answer in &lt;a href=&quot;https://hexo.io/docs/troubleshooting.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;troubleshooting&lt;/a&gt; or you can ask me on &lt;a href=&quot;https://github.com/hexojs/hexo/issues&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;GitHub&lt;/a&gt;.&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>PostgreSQL配置文件详解</title>
    <link href="https://www.cloudyslife.cn/2019/02/15/PostgreSQL%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/"/>
    <id>https://www.cloudyslife.cn/2019/02/15/PostgreSQL配置文件详解/</id>
    <published>2019-02-15T06:37:01.000Z</published>
    <updated>2019-03-19T04:10:29.602Z</updated>
    
    <content type="html"><![CDATA[<p>PostgreSQL11配置详解</p><h3 id="配置文件位置"><a href="#配置文件位置" class="headerlink" title="配置文件位置"></a>配置文件位置</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">postgres=# select name, setting from pg_settings where category='File Locations' ;</span><br><span class="line">       name        |                setting                 </span><br><span class="line">-------------------+----------------------------------------</span><br><span class="line"> config_file       | /var/lib/pgsql/11/data/postgresql.conf</span><br><span class="line"> data_directory    | /var/lib/pgsql/11/data</span><br><span class="line"> external_pid_file | </span><br><span class="line"> hba_file          | /var/lib/pgsql/11/data/pg_hba.conf</span><br><span class="line"> ident_file        | /var/lib/pgsql/11/data/pg_ident.conf</span><br><span class="line">(5 rows)</span><br><span class="line"></span><br><span class="line">//使用root权限查找</span><br><span class="line">[root@api data]# find / -name pg_hba.conf</span><br><span class="line">/var/lib/pgsql/11/data/pg_hba.conf</span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="postgresql-conf"><a href="#postgresql-conf" class="headerlink" title="postgresql.conf"></a>postgresql.conf</h3><p>​    该文件包含一些通用设置，比如内存分配，新建database的默认存储位置，PostgreSQL服务器的IP地址，日志的位置以及许多其他设置。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> - Connection Settings -</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">listen_addresses = <span class="string">'localhost'</span> <span class="comment">#默认只允许本地访问，*为所有人访问</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">port = 5432</span></span><br><span class="line">max_connections = 100 #确定到数据库服务器的最大并发连接数。 缺省值通常为100个连接，但如果您的内核设置不支持它（在initdb期间确定），则可能会更少。运行备用服务器（即为从库）时，必须将此参数设置为与主服务器上相同或更高的值。 否则，查询将不被允许在备用服务器中</span><br><span class="line"><span class="meta">#</span><span class="bash">superuser_reserved_connections = 3 <span class="comment">#确定为PostgreSQL超级用户连接保留的连接“插槽”的数量。 最多max_connections连接可以同时活动。 只要活动并发连接的数量至少为max_connections minus superuser_reserved_connections，新连接将仅被超级用户接受，并且不会接受新的复制连接。默认值是三个连接。该值必须小于max_connections的值。</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">unix_socket_directories = <span class="string">'/var/run/postgresql, /tmp'</span><span class="comment"># comma-separated list of directories</span></span></span><br><span class="line"># (change requires restart)</span><br><span class="line"><span class="meta">#</span><span class="bash">unix_socket_group = <span class="string">''</span><span class="comment"># (change requires restart)</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">unix_socket_permissions = 0777<span class="comment"># begin with 0 to use octal notation</span></span></span><br><span class="line"># (change requires restart)</span><br><span class="line"><span class="meta">#</span><span class="bash">bonjour = off<span class="comment"># advertise server via Bonjour</span></span></span><br><span class="line"># (change requires restart)</span><br><span class="line"><span class="meta">#</span><span class="bash">bonjour_name = <span class="string">''</span><span class="comment"># defaults to the computer name</span></span></span><br><span class="line"># (change requires restart)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> - TCP Keepalives -</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> see <span class="string">"man 7 tcp"</span> <span class="keyword">for</span> details</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">tcp_keepalives_idle = 0<span class="comment"># TCP_KEEPIDLE, in seconds;</span></span></span><br><span class="line"># 0 selects the system default</span><br><span class="line"><span class="meta">#</span><span class="bash">tcp_keepalives_interval = 0<span class="comment"># TCP_KEEPINTVL, in seconds;</span></span></span><br><span class="line"># 0 selects the system default</span><br><span class="line"><span class="meta">#</span><span class="bash">tcp_keepalives_count = 0<span class="comment"># TCP_KEEPCNT;</span></span></span><br><span class="line"># 0 selects the system default</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> - Authentication -</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">authentication_timeout = 1min<span class="comment"># 1s-600s</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">password_encryption = md5<span class="comment"># md5 or scram-sha-256</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">db_user_namespace = off</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> GSSAPI using Kerberos</span></span><br><span class="line"><span class="meta">#</span><span class="bash">krb_server_keyfile = <span class="string">''</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">krb_caseins_users = off</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> - SSL -</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">ssl = off</span></span><br><span class="line"><span class="meta">#</span><span class="bash">ssl_ca_file = <span class="string">''</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">ssl_cert_file = <span class="string">'server.crt'</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">ssl_crl_file = <span class="string">''</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">ssl_key_file = <span class="string">'server.key'</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">ssl_ciphers = <span class="string">'HIGH:MEDIUM:+3DES:!aNULL'</span> <span class="comment"># allowed SSL ciphers</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">ssl_prefer_server_ciphers = on</span></span><br><span class="line"><span class="meta">#</span><span class="bash">ssl_ecdh_curve = <span class="string">'prime256v1'</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">ssl_dh_params_file = <span class="string">''</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">ssl_passphrase_command = <span class="string">''</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">ssl_passphrase_command_supports_reload = off</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">------------------------------------------------------------------------------</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> RESOURCE USAGE (except WAL)</span></span><br><span class="line"><span class="meta">#</span><span class="bash">------------------------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> - Memory -</span></span><br><span class="line"></span><br><span class="line">shared_buffers = 128MB# min 128kB</span><br><span class="line"># (change requires restart)</span><br><span class="line"><span class="meta">#</span><span class="bash">huge_pages = try<span class="comment"># on, off, or try</span></span></span><br><span class="line"># (change requires restart)</span><br><span class="line"><span class="meta">#</span><span class="bash">temp_buffers = 8MB<span class="comment"># min 800kB</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">max_prepared_transactions = 0<span class="comment"># zero disables the feature</span></span></span><br><span class="line"># (change requires restart)</span><br><span class="line"><span class="meta">#</span><span class="bash"> Caution: it is not advisable to <span class="built_in">set</span> max_prepared_transactions nonzero unless</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> you actively intend to use prepared transactions.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">work_mem = 4MB<span class="comment"># min 64kB</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">maintenance_work_mem = 64MB<span class="comment"># min 1MB</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">autovacuum_work_mem = -1<span class="comment"># min 1MB, or -1 to use maintenance_work_mem</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">max_stack_depth = 2MB<span class="comment"># min 100kB</span></span></span><br><span class="line">dynamic_shared_memory_type = posix# the default is the first option</span><br><span class="line"># supported by the operating system:</span><br><span class="line">#   posix</span><br><span class="line">#   sysv</span><br><span class="line">#   windows</span><br><span class="line">#   mmap</span><br><span class="line"># use none to disable dynamic shared memory</span><br><span class="line"># (change requires restart)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> - Disk -</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">temp_file_limit = -1<span class="comment"># limits per-process temp file space</span></span></span><br><span class="line"># in kB, or -1 for no limit</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> - Kernel Resources -</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">max_files_per_process = 1000<span class="comment"># min 25</span></span></span><br><span class="line"># (change requires restart)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> - Cost-Based Vacuum Delay -</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">vacuum_cost_delay = 0<span class="comment"># 0-100 milliseconds</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">vacuum_cost_page_hit = 1<span class="comment"># 0-10000 credits</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">vacuum_cost_page_miss = 10<span class="comment"># 0-10000 credits</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">vacuum_cost_page_dirty = 20<span class="comment"># 0-10000 credits</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">vacuum_cost_limit = 200<span class="comment"># 1-10000 credits</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> - Background Writer -</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">bgwriter_delay = 200ms<span class="comment"># 10-10000ms between rounds</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">bgwriter_lru_maxpages = 100<span class="comment"># max buffers written/round, 0 disables</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">bgwriter_lru_multiplier = 2.0<span class="comment"># 0-10.0 multiplier on buffers scanned/round</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">bgwriter_flush_after = 512kB<span class="comment"># measured in pages, 0 disables</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> - Asynchronous Behavior -</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">effective_io_concurrency = 1<span class="comment"># 1-1000; 0 disables prefetching</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">max_worker_processes = 8<span class="comment"># (change requires restart)</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">max_parallel_maintenance_workers = 2<span class="comment"># taken from max_parallel_workers</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">max_parallel_workers_per_gather = 2<span class="comment"># taken from max_parallel_workers</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">parallel_leader_participation = on</span></span><br><span class="line"><span class="meta">#</span><span class="bash">max_parallel_workers = 8<span class="comment"># maximum number of max_worker_processes that</span></span></span><br><span class="line"># can be used in parallel operations</span><br><span class="line"><span class="meta">#</span><span class="bash">old_snapshot_threshold = -1<span class="comment"># 1min-60d; -1 disables; 0 is immediate</span></span></span><br><span class="line"># (change requires restart)</span><br><span class="line"><span class="meta">#</span><span class="bash">backend_flush_after = 0<span class="comment"># measured in pages, 0 disables</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">------------------------------------------------------------------------------</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> WRITE-AHEAD LOG</span></span><br><span class="line"><span class="meta">#</span><span class="bash">------------------------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> - Settings -</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">wal_level = replica<span class="comment"># minimal, replica, or logical</span></span></span><br><span class="line"># (change requires restart)</span><br><span class="line"><span class="meta">#</span><span class="bash">fsync = on<span class="comment"># flush data to disk for crash safety</span></span></span><br><span class="line"># (turning this off can cause</span><br><span class="line"># unrecoverable data corruption)</span><br><span class="line"><span class="meta">#</span><span class="bash">synchronous_commit = on<span class="comment"># synchronization level;</span></span></span><br><span class="line"># off, local, remote_write, remote_apply, or on</span><br><span class="line"><span class="meta">#</span><span class="bash">wal_sync_method = fsync<span class="comment"># the default is the first option</span></span></span><br><span class="line"># supported by the operating system:</span><br><span class="line">#   open_datasync</span><br><span class="line">#   fdatasync (default on Linux)</span><br><span class="line">#   fsync</span><br><span class="line">#   fsync_writethrough</span><br><span class="line">#   open_sync</span><br><span class="line"><span class="meta">#</span><span class="bash">full_page_writes = on<span class="comment"># recover from partial page writes</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">wal_compression = off<span class="comment"># enable compression of full-page writes</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">wal_log_hints = off<span class="comment"># also do full page writes of non-critical updates</span></span></span><br><span class="line"># (change requires restart)</span><br><span class="line"><span class="meta">#</span><span class="bash">wal_buffers = -1<span class="comment"># min 32kB, -1 sets based on shared_buffers</span></span></span><br><span class="line"># (change requires restart)</span><br><span class="line"><span class="meta">#</span><span class="bash">wal_writer_delay = 200ms<span class="comment"># 1-10000 milliseconds</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">wal_writer_flush_after = 1MB<span class="comment"># measured in pages, 0 disables</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">commit_delay = 0<span class="comment"># range 0-100000, in microseconds</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">commit_siblings = 5<span class="comment"># range 1-1000</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> - Checkpoints -</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">checkpoint_timeout = 5min<span class="comment"># range 30s-1d</span></span></span><br><span class="line">max_wal_size = 1GB</span><br><span class="line">min_wal_size = 80MB</span><br><span class="line"><span class="meta">#</span><span class="bash">checkpoint_completion_target = 0.5<span class="comment"># checkpoint target duration, 0.0 - 1.0</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">checkpoint_flush_after = 256kB<span class="comment"># measured in pages, 0 disables</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">checkpoint_warning = 30s<span class="comment"># 0 disables</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> - Archiving -</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">archive_mode = off<span class="comment"># enables archiving; off, on, or always</span></span></span><br><span class="line"># (change requires restart)</span><br><span class="line"><span class="meta">#</span><span class="bash">archive_command = <span class="string">''</span><span class="comment"># command to use to archive a logfile segment</span></span></span><br><span class="line"># placeholders: %p = path of file to archive</span><br><span class="line">#               %f = file name only</span><br><span class="line"># e.g. 'test ! -f /mnt/server/archivedir/%f &amp;&amp; cp %p /mnt/server/archivedir/%f'</span><br><span class="line"><span class="meta">#</span><span class="bash">archive_timeout = 0<span class="comment"># force a logfile segment switch after this</span></span></span><br><span class="line"># number of seconds; 0 disables</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">------------------------------------------------------------------------------</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> REPLICATION</span></span><br><span class="line"><span class="meta">#</span><span class="bash">------------------------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> - Sending Servers -</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Set these on the master and on any standby that will send replication data.</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">max_wal_senders = 10<span class="comment"># max number of walsender processes</span></span></span><br><span class="line"># (change requires restart)</span><br><span class="line"><span class="meta">#</span><span class="bash">wal_keep_segments = 0<span class="comment"># in logfile segments; 0 disables</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">wal_sender_timeout = 60s<span class="comment"># in milliseconds; 0 disables</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">max_replication_slots = 10<span class="comment"># max number of replication slots</span></span></span><br><span class="line"># (change requires restart)</span><br><span class="line"><span class="meta">#</span><span class="bash">track_commit_timestamp = off<span class="comment"># collect timestamp of transaction commit</span></span></span><br><span class="line"># (change requires restart)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> - Master Server -</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> These settings are ignored on a standby server.</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">synchronous_standby_names = <span class="string">''</span><span class="comment"># standby servers that provide sync rep</span></span></span><br><span class="line"># method to choose sync standbys, number of sync standbys,</span><br><span class="line"># and comma-separated list of application_name</span><br><span class="line"># from standby(s); '*' = all</span><br><span class="line"><span class="meta">#</span><span class="bash">vacuum_defer_cleanup_age = 0<span class="comment"># number of xacts by which cleanup is delayed</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> - Standby Servers -</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> These settings are ignored on a master server.</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">hot_standby = on<span class="comment"># "off" disallows queries during recovery</span></span></span><br><span class="line"># (change requires restart)</span><br><span class="line"><span class="meta">#</span><span class="bash">max_standby_archive_delay = 30s<span class="comment"># max delay before canceling queries</span></span></span><br><span class="line"># when reading WAL from archive;</span><br><span class="line"># -1 allows indefinite delay</span><br><span class="line"><span class="meta">#</span><span class="bash">max_standby_streaming_delay = 30s<span class="comment"># max delay before canceling queries</span></span></span><br><span class="line"># when reading streaming WAL;</span><br><span class="line"># -1 allows indefinite delay</span><br><span class="line"><span class="meta">#</span><span class="bash">wal_receiver_status_interval = 10s<span class="comment"># send replies at least this often</span></span></span><br><span class="line"># 0 disables</span><br><span class="line"><span class="meta">#</span><span class="bash">hot_standby_feedback = off<span class="comment"># send info from standby to prevent</span></span></span><br><span class="line"># query conflicts</span><br><span class="line"><span class="meta">#</span><span class="bash">wal_receiver_timeout = 60s<span class="comment"># time that receiver waits for</span></span></span><br><span class="line"># communication from master</span><br><span class="line"># in milliseconds; 0 disables</span><br><span class="line"><span class="meta">#</span><span class="bash">wal_retrieve_retry_interval = 5s<span class="comment"># time to wait before retrying to</span></span></span><br><span class="line"># retrieve WAL after a failed attempt</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> - Subscribers -</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> These settings are ignored on a publisher.</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">max_logical_replication_workers = 4<span class="comment"># taken from max_worker_processes</span></span></span><br><span class="line"># (change requires restart)</span><br><span class="line"><span class="meta">#</span><span class="bash">max_sync_workers_per_subscription = 2<span class="comment"># taken from max_logical_replication_workers</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">------------------------------------------------------------------------------</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> QUERY TUNING</span></span><br><span class="line"><span class="meta">#</span><span class="bash">------------------------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> - Planner Method Configuration -</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">enable_bitmapscan = on</span></span><br><span class="line"><span class="meta">#</span><span class="bash">enable_hashagg = on</span></span><br><span class="line"><span class="meta">#</span><span class="bash">enable_hashjoin = on</span></span><br><span class="line"><span class="meta">#</span><span class="bash">enable_indexscan = on</span></span><br><span class="line"><span class="meta">#</span><span class="bash">enable_indexonlyscan = on</span></span><br><span class="line"><span class="meta">#</span><span class="bash">enable_material = on</span></span><br><span class="line"><span class="meta">#</span><span class="bash">enable_mergejoin = on</span></span><br><span class="line"><span class="meta">#</span><span class="bash">enable_nestloop = on</span></span><br><span class="line"><span class="meta">#</span><span class="bash">enable_parallel_append = on</span></span><br><span class="line"><span class="meta">#</span><span class="bash">enable_seqscan = on</span></span><br><span class="line"><span class="meta">#</span><span class="bash">enable_sort = on</span></span><br><span class="line"><span class="meta">#</span><span class="bash">enable_tidscan = on</span></span><br><span class="line"><span class="meta">#</span><span class="bash">enable_partitionwise_join = off</span></span><br><span class="line"><span class="meta">#</span><span class="bash">enable_partitionwise_aggregate = off</span></span><br><span class="line"><span class="meta">#</span><span class="bash">enable_parallel_hash = on</span></span><br><span class="line"><span class="meta">#</span><span class="bash">enable_partition_pruning = on</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> - Planner Cost Constants -</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">seq_page_cost = 1.0<span class="comment"># measured on an arbitrary scale</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">random_page_cost = 4.0<span class="comment"># same scale as above</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">cpu_tuple_cost = 0.01<span class="comment"># same scale as above</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">cpu_index_tuple_cost = 0.005<span class="comment"># same scale as above</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">cpu_operator_cost = 0.0025<span class="comment"># same scale as above</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">parallel_tuple_cost = 0.1<span class="comment"># same scale as above</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">parallel_setup_cost = 1000.0<span class="comment"># same scale as above</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">jit_above_cost = 100000<span class="comment"># perform JIT compilation if available</span></span></span><br><span class="line"># and query more expensive than this;</span><br><span class="line"># -1 disables</span><br><span class="line"><span class="meta">#</span><span class="bash">jit_inline_above_cost = 500000<span class="comment"># inline small functions if query is</span></span></span><br><span class="line"># more expensive than this; -1 disables</span><br><span class="line"><span class="meta">#</span><span class="bash">jit_optimize_above_cost = 500000<span class="comment"># use expensive JIT optimizations if</span></span></span><br><span class="line"># query is more expensive than this;</span><br><span class="line"># -1 disables</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">min_parallel_table_scan_size = 8MB</span></span><br><span class="line"><span class="meta">#</span><span class="bash">min_parallel_index_scan_size = 512kB</span></span><br><span class="line"><span class="meta">#</span><span class="bash">effective_cache_size = 4GB</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> - Genetic Query Optimizer -</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">geqo = on</span></span><br><span class="line"><span class="meta">#</span><span class="bash">geqo_threshold = 12</span></span><br><span class="line"><span class="meta">#</span><span class="bash">geqo_effort = 5<span class="comment"># range 1-10</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">geqo_pool_size = 0<span class="comment"># selects default based on effort</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">geqo_generations = 0<span class="comment"># selects default based on effort</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">geqo_selection_bias = 2.0<span class="comment"># range 1.5-2.0</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">geqo_seed = 0.0<span class="comment"># range 0.0-1.0</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> - Other Planner Options -</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">default_statistics_target = 100<span class="comment"># range 1-10000</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">constraint_exclusion = partition<span class="comment"># on, off, or partition</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">cursor_tuple_fraction = 0.1<span class="comment"># range 0.0-1.0</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">from_collapse_limit = 8</span></span><br><span class="line"><span class="meta">#</span><span class="bash">join_collapse_limit = 8<span class="comment"># 1 disables collapsing of explicit</span></span></span><br><span class="line"># JOIN clauses</span><br><span class="line"><span class="meta">#</span><span class="bash">force_parallel_mode = off</span></span><br><span class="line"><span class="meta">#</span><span class="bash">jit = off<span class="comment"># allow JIT compilation</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">------------------------------------------------------------------------------</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> REPORTING AND LOGGING</span></span><br><span class="line"><span class="meta">#</span><span class="bash">------------------------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> - Where to Log -</span></span><br><span class="line"></span><br><span class="line">log_destination = 'stderr'# Valid values are combinations of</span><br><span class="line"># stderr, csvlog, syslog, and eventlog,</span><br><span class="line"># depending on platform.  csvlog</span><br><span class="line"># requires logging_collector to be on.</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> This is used when logging to stderr:</span></span><br><span class="line">logging_collector = on# Enable capturing of stderr and csvlog</span><br><span class="line"># into log files. Required to be on for</span><br><span class="line"># csvlogs.</span><br><span class="line"># (change requires restart)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> These are only used <span class="keyword">if</span> logging_collector is on:</span></span><br><span class="line">log_directory = 'log'# directory where log files are written,</span><br><span class="line"># can be absolute or relative to PGDATA</span><br><span class="line">log_filename = 'postgresql-%a.log'# log file name pattern,</span><br><span class="line"># can include strftime() escapes</span><br><span class="line"><span class="meta">#</span><span class="bash">log_file_mode = 0600<span class="comment"># creation mode for log files,</span></span></span><br><span class="line"># begin with 0 to use octal notation</span><br><span class="line">log_truncate_on_rotation = on# If on, an existing log file with the</span><br><span class="line"># same name as the new log file will be</span><br><span class="line"># truncated rather than appended to.</span><br><span class="line"># But such truncation only occurs on</span><br><span class="line"># time-driven rotation, not on restarts</span><br><span class="line"># or size-driven rotation.  Default is</span><br><span class="line"># off, meaning append to existing files</span><br><span class="line"># in all cases.</span><br><span class="line">log_rotation_age = 1d# Automatic rotation of logfiles will</span><br><span class="line"># happen after that time.  0 disables.</span><br><span class="line">log_rotation_size = 0# Automatic rotation of logfiles will</span><br><span class="line"># happen after that much log output.</span><br><span class="line"># 0 disables.</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> These are relevant when logging to syslog:</span></span><br><span class="line"><span class="meta">#</span><span class="bash">syslog_facility = <span class="string">'LOCAL0'</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">syslog_ident = <span class="string">'postgres'</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">syslog_sequence_numbers = on</span></span><br><span class="line"><span class="meta">#</span><span class="bash">syslog_split_messages = on</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> This is only relevant when logging to eventlog (win32):</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> (change requires restart)</span></span><br><span class="line"><span class="meta">#</span><span class="bash">event_source = <span class="string">'PostgreSQL'</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> - When to Log -</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">client_min_messages = notice<span class="comment"># values in order of decreasing detail:</span></span></span><br><span class="line">#   debug5</span><br><span class="line">#   debug4</span><br><span class="line">#   debug3</span><br><span class="line">#   debug2</span><br><span class="line">#   debug1</span><br><span class="line">#   log</span><br><span class="line">#   notice</span><br><span class="line">#   warning</span><br><span class="line">#   error</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">log_min_messages = warning<span class="comment"># values in order of decreasing detail:</span></span></span><br><span class="line">#   debug5</span><br><span class="line">#   debug4</span><br><span class="line">#   debug3</span><br><span class="line">#   debug2</span><br><span class="line">#   debug1</span><br><span class="line">#   info</span><br><span class="line">#   notice</span><br><span class="line">#   warning</span><br><span class="line">#   error</span><br><span class="line">#   log</span><br><span class="line">#   fatal</span><br><span class="line">#   panic</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">log_min_error_statement = error<span class="comment"># values in order of decreasing detail:</span></span></span><br><span class="line">#   debug5</span><br><span class="line">#   debug4</span><br><span class="line">#   debug3</span><br><span class="line">#   debug2</span><br><span class="line">#   debug1</span><br><span class="line">#   info</span><br><span class="line">#   notice</span><br><span class="line">#   warning</span><br><span class="line">#   error</span><br><span class="line">#   log</span><br><span class="line">#   fatal</span><br><span class="line">#   panic (effectively off)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">log_min_duration_statement = -1<span class="comment"># -1 is disabled, 0 logs all statements</span></span></span><br><span class="line"># and their durations, &gt; 0 logs only</span><br><span class="line"># statements running at least this number</span><br><span class="line"># of milliseconds</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> - What to Log -</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">debug_print_parse = off</span></span><br><span class="line"><span class="meta">#</span><span class="bash">debug_print_rewritten = off</span></span><br><span class="line"><span class="meta">#</span><span class="bash">debug_print_plan = off</span></span><br><span class="line"><span class="meta">#</span><span class="bash">debug_pretty_print = on</span></span><br><span class="line"><span class="meta">#</span><span class="bash">log_checkpoints = off</span></span><br><span class="line"><span class="meta">#</span><span class="bash">log_connections = off</span></span><br><span class="line"><span class="meta">#</span><span class="bash">log_disconnections = off</span></span><br><span class="line"><span class="meta">#</span><span class="bash">log_duration = off</span></span><br><span class="line"><span class="meta">#</span><span class="bash">log_error_verbosity = default<span class="comment"># terse, default, or verbose messages</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">log_hostname = off</span></span><br><span class="line">log_line_prefix = '%m [%p] '# special values:</span><br><span class="line">#   %a = application name</span><br><span class="line">#   %u = user name</span><br><span class="line">#   %d = database name</span><br><span class="line">#   %r = remote host and port</span><br><span class="line">#   %h = remote host</span><br><span class="line">#   %p = process ID</span><br><span class="line">#   %t = timestamp without milliseconds</span><br><span class="line">#   %m = timestamp with milliseconds</span><br><span class="line">#   %n = timestamp with milliseconds (as a Unix epoch)</span><br><span class="line">#   %i = command tag</span><br><span class="line">#   %e = SQL state</span><br><span class="line">#   %c = session ID</span><br><span class="line">#   %l = session line number</span><br><span class="line">#   %s = session start timestamp</span><br><span class="line">#   %v = virtual transaction ID</span><br><span class="line">#   %x = transaction ID (0 if none)</span><br><span class="line">#   %q = stop here in non-session</span><br><span class="line">#        processes</span><br><span class="line">#   %% = '%'</span><br><span class="line"># e.g. '&lt;%u%%%d&gt; '</span><br><span class="line"><span class="meta">#</span><span class="bash">log_lock_waits = off<span class="comment"># log lock waits &gt;= deadlock_timeout</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">log_statement = <span class="string">'none'</span><span class="comment"># none, ddl, mod, all</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">log_replication_commands = off</span></span><br><span class="line"><span class="meta">#</span><span class="bash">log_temp_files = -1<span class="comment"># log temporary files equal or larger</span></span></span><br><span class="line"># than the specified size in kilobytes;</span><br><span class="line"># -1 disables, 0 logs all temp files</span><br><span class="line">log_timezone = 'UTC'</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">------------------------------------------------------------------------------</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> PROCESS TITLE</span></span><br><span class="line"><span class="meta">#</span><span class="bash">------------------------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">cluster_name = <span class="string">''</span><span class="comment"># added to process titles if nonempty</span></span></span><br><span class="line"># (change requires restart)</span><br><span class="line"><span class="meta">#</span><span class="bash">update_process_title = on</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">------------------------------------------------------------------------------</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> STATISTICS</span></span><br><span class="line"><span class="meta">#</span><span class="bash">------------------------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> - Query and Index Statistics Collector -</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">track_activities = on</span></span><br><span class="line"><span class="meta">#</span><span class="bash">track_counts = on</span></span><br><span class="line"><span class="meta">#</span><span class="bash">track_io_timing = off</span></span><br><span class="line"><span class="meta">#</span><span class="bash">track_functions = none<span class="comment"># none, pl, all</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">track_activity_query_size = 1024<span class="comment"># (change requires restart)</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">stats_temp_directory = <span class="string">'pg_stat_tmp'</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> - Monitoring -</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">log_parser_stats = off</span></span><br><span class="line"><span class="meta">#</span><span class="bash">log_planner_stats = off</span></span><br><span class="line"><span class="meta">#</span><span class="bash">log_executor_stats = off</span></span><br><span class="line"><span class="meta">#</span><span class="bash">log_statement_stats = off</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">------------------------------------------------------------------------------</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> AUTOVACUUM</span></span><br><span class="line"><span class="meta">#</span><span class="bash">------------------------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">autovacuum = on<span class="comment"># Enable autovacuum subprocess?  'on'</span></span></span><br><span class="line"># requires track_counts to also be on.</span><br><span class="line"><span class="meta">#</span><span class="bash">log_autovacuum_min_duration = -1<span class="comment"># -1 disables, 0 logs all actions and</span></span></span><br><span class="line"># their durations, &gt; 0 logs only</span><br><span class="line"># actions running at least this number</span><br><span class="line"># of milliseconds.</span><br><span class="line"><span class="meta">#</span><span class="bash">autovacuum_max_workers = 3<span class="comment"># max number of autovacuum subprocesses</span></span></span><br><span class="line"># (change requires restart)</span><br><span class="line"><span class="meta">#</span><span class="bash">autovacuum_naptime = 1min<span class="comment"># time between autovacuum runs</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">autovacuum_vacuum_threshold = 50<span class="comment"># min number of row updates before</span></span></span><br><span class="line"># vacuum</span><br><span class="line"><span class="meta">#</span><span class="bash">autovacuum_analyze_threshold = 50<span class="comment"># min number of row updates before</span></span></span><br><span class="line"># analyze</span><br><span class="line"><span class="meta">#</span><span class="bash">autovacuum_vacuum_scale_factor = 0.2<span class="comment"># fraction of table size before vacuum</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">autovacuum_analyze_scale_factor = 0.1<span class="comment"># fraction of table size before analyze</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">autovacuum_freeze_max_age = 200000000<span class="comment"># maximum XID age before forced vacuum</span></span></span><br><span class="line"># (change requires restart)</span><br><span class="line"><span class="meta">#</span><span class="bash">autovacuum_multixact_freeze_max_age = 400000000<span class="comment"># maximum multixact age</span></span></span><br><span class="line"># before forced vacuum</span><br><span class="line"># (change requires restart)</span><br><span class="line"><span class="meta">#</span><span class="bash">autovacuum_vacuum_cost_delay = 20ms<span class="comment"># default vacuum cost delay for</span></span></span><br><span class="line"># autovacuum, in milliseconds;</span><br><span class="line"># -1 means use vacuum_cost_delay</span><br><span class="line"><span class="meta">#</span><span class="bash">autovacuum_vacuum_cost_limit = -1<span class="comment"># default vacuum cost limit for</span></span></span><br><span class="line"># autovacuum, -1 means use</span><br><span class="line"># vacuum_cost_limit</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">------------------------------------------------------------------------------</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> CLIENT CONNECTION DEFAULTS</span></span><br><span class="line"><span class="meta">#</span><span class="bash">------------------------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> - Statement Behavior -</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">search_path = <span class="string">'"$user", public'</span><span class="comment"># schema names</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">row_security = on</span></span><br><span class="line"><span class="meta">#</span><span class="bash">default_tablespace = <span class="string">''</span><span class="comment"># a tablespace name, '' uses the default</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">temp_tablespaces = <span class="string">''</span><span class="comment"># a list of tablespace names, '' uses</span></span></span><br><span class="line"># only default tablespace</span><br><span class="line"><span class="meta">#</span><span class="bash">check_function_bodies = on</span></span><br><span class="line"><span class="meta">#</span><span class="bash">default_transaction_isolation = <span class="string">'read committed'</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">default_transaction_read_only = off</span></span><br><span class="line"><span class="meta">#</span><span class="bash">default_transaction_deferrable = off</span></span><br><span class="line"><span class="meta">#</span><span class="bash">session_replication_role = <span class="string">'origin'</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">statement_timeout = 0<span class="comment"># in milliseconds, 0 is disabled</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">lock_timeout = 0<span class="comment"># in milliseconds, 0 is disabled</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">idle_in_transaction_session_timeout = 0<span class="comment"># in milliseconds, 0 is disabled</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">vacuum_freeze_min_age = 50000000</span></span><br><span class="line"><span class="meta">#</span><span class="bash">vacuum_freeze_table_age = 150000000</span></span><br><span class="line"><span class="meta">#</span><span class="bash">vacuum_multixact_freeze_min_age = 5000000</span></span><br><span class="line"><span class="meta">#</span><span class="bash">vacuum_multixact_freeze_table_age = 150000000</span></span><br><span class="line"><span class="meta">#</span><span class="bash">vacuum_cleanup_index_scale_factor = 0.1<span class="comment"># fraction of total number of tuples</span></span></span><br><span class="line"># before index cleanup, 0 always performs</span><br><span class="line"># index cleanup</span><br><span class="line"><span class="meta">#</span><span class="bash">bytea_output = <span class="string">'hex'</span><span class="comment"># hex, escape</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">xmlbinary = <span class="string">'base64'</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">xmloption = <span class="string">'content'</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">gin_fuzzy_search_limit = 0</span></span><br><span class="line"><span class="meta">#</span><span class="bash">gin_pending_list_limit = 4MB</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> - Locale and Formatting -</span></span><br><span class="line"></span><br><span class="line">datestyle = 'iso, mdy'</span><br><span class="line"><span class="meta">#</span><span class="bash">intervalstyle = <span class="string">'postgres'</span></span></span><br><span class="line">timezone = 'UTC'</span><br><span class="line"><span class="meta">#</span><span class="bash">timezone_abbreviations = <span class="string">'Default'</span>     <span class="comment"># Select the set of available time zone</span></span></span><br><span class="line"># abbreviations.  Currently, there are</span><br><span class="line">#   Default</span><br><span class="line">#   Australia (historical usage)</span><br><span class="line">#   India</span><br><span class="line"># You can create your own file in</span><br><span class="line"># share/timezonesets/.</span><br><span class="line"><span class="meta">#</span><span class="bash">extra_float_digits = 0<span class="comment"># min -15, max 3</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">client_encoding = sql_ascii<span class="comment"># actually, defaults to database</span></span></span><br><span class="line"># encoding</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> These settings are initialized by initdb, but they can be changed.</span></span><br><span class="line">lc_messages = 'en_US.UTF-8'# locale for system error message</span><br><span class="line"># strings</span><br><span class="line">lc_monetary = 'en_US.UTF-8'# locale for monetary formatting</span><br><span class="line">lc_numeric = 'en_US.UTF-8'# locale for number formatting</span><br><span class="line">lc_time = 'en_US.UTF-8'# locale for time formatting</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> default configuration <span class="keyword">for</span> text search</span></span><br><span class="line">default_text_search_config = 'pg_catalog.english'</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> - Shared Library Preloading -</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">shared_preload_libraries = <span class="string">''</span><span class="comment"># (change requires restart)</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">local_preload_libraries = <span class="string">''</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">session_preload_libraries = <span class="string">''</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">jit_provider = <span class="string">'llvmjit'</span><span class="comment"># JIT library to use</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> - Other Defaults -</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">dynamic_library_path = <span class="string">'$libdir'</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">------------------------------------------------------------------------------</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> LOCK MANAGEMENT</span></span><br><span class="line"><span class="meta">#</span><span class="bash">------------------------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">deadlock_timeout = 1s</span></span><br><span class="line"><span class="meta">#</span><span class="bash">max_locks_per_transaction = 64<span class="comment"># min 10</span></span></span><br><span class="line"># (change requires restart)</span><br><span class="line"><span class="meta">#</span><span class="bash">max_pred_locks_per_transaction = 64<span class="comment"># min 10</span></span></span><br><span class="line"># (change requires restart)</span><br><span class="line"><span class="meta">#</span><span class="bash">max_pred_locks_per_relation = -2<span class="comment"># negative values mean</span></span></span><br><span class="line"># (max_pred_locks_per_transaction</span><br><span class="line">#  / -max_pred_locks_per_relation) - 1</span><br><span class="line"><span class="meta">#</span><span class="bash">max_pred_locks_per_page = 2            <span class="comment"># min 0</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">------------------------------------------------------------------------------</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> VERSION AND PLATFORM COMPATIBILITY</span></span><br><span class="line"><span class="meta">#</span><span class="bash">------------------------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> - Previous PostgreSQL Versions -</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">array_nulls = on</span></span><br><span class="line"><span class="meta">#</span><span class="bash">backslash_quote = safe_encoding<span class="comment"># on, off, or safe_encoding</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">default_with_oids = off</span></span><br><span class="line"><span class="meta">#</span><span class="bash">escape_string_warning = on</span></span><br><span class="line"><span class="meta">#</span><span class="bash">lo_compat_privileges = off</span></span><br><span class="line"><span class="meta">#</span><span class="bash">operator_precedence_warning = off</span></span><br><span class="line"><span class="meta">#</span><span class="bash">quote_all_identifiers = off</span></span><br><span class="line"><span class="meta">#</span><span class="bash">standard_conforming_strings = on</span></span><br><span class="line"><span class="meta">#</span><span class="bash">synchronize_seqscans = on</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> - Other Platforms and Clients -</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">transform_null_equals = off</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">------------------------------------------------------------------------------</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ERROR HANDLING</span></span><br><span class="line"><span class="meta">#</span><span class="bash">------------------------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">exit_on_error = off<span class="comment"># terminate session on any error?</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">restart_after_crash = on<span class="comment"># reinitialize after backend crash?</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">------------------------------------------------------------------------------</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> CONFIG FILE INCLUDES</span></span><br><span class="line"><span class="meta">#</span><span class="bash">------------------------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> These options allow settings to be loaded from files other than the</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> default postgresql.conf.</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">include_dir = <span class="string">'conf.d'</span><span class="comment"># include files ending in '.conf' from</span></span></span><br><span class="line"># directory 'conf.d'</span><br><span class="line"><span class="meta">#</span><span class="bash">include_if_exists = <span class="string">'exists.conf'</span><span class="comment"># include file only if it exists</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">include = <span class="string">'special.conf'</span><span class="comment"># include file</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">------------------------------------------------------------------------------</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> CUSTOMIZED OPTIONS</span></span><br><span class="line"><span class="meta">#</span><span class="bash">------------------------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Add settings <span class="keyword">for</span> extensions here</span></span><br></pre></td></tr></table></figure><h3 id="pg-hba-conf"><a href="#pg-hba-conf" class="headerlink" title="pg_hba.conf"></a>pg_hba.conf</h3><p>​    客户端认证配置文件，允许哪些用户连接到哪个数据库，允许哪些IP或者哪个网段的IP连接到本服务器，以及指定连接时使用的身份验证模式</p><p>pg_hba.conf 客户端认证配置文件的认证类型包括:</p><ul><li><p>trust 本地可以使用 psql -U postgres 直接登录服务器； (生产环境勿用)</p></li><li><p>peer 本地可以使用 <code>psql -h 127.0.0.1 -d postgres -U postgres</code>直接登录服务器; (peer使用发起端的操作系统名进行身份验证)</p></li><li><p>password 使用 用户名密码(明文密码) 登录 ； (生产环境勿用)</p></li><li><p>ident  </p><p>​    ident是Linux下PostgreSQL默认的local认证方式，凡是能正确登录服务器的操作系统用户（注：不是数据库用户）就能使用本用户映射的数据库用户不需密码登录数据库。    </p></li><li><p>md5    md5是常用的密码认证方式，如果你不使用ident，最好使用md5。密码是以md5形式传送给数据库，较安全，且不需建立同名的操作系统用户</p></li><li><p>reject    拒绝认证<br>建议使用md5方式,不同用户相同密码加密的结果也不相同,因为会使用用户名和密码一同加密. 所以要注意:若已设密码的用户名称改变了,密码也会失效…</p></li><li><p>Ident和peer模式适用于Linux，Unix和Mac,不适用于windwos</p></li></ul><h3 id="pg-ident-conf"><a href="#pg-ident-conf" class="headerlink" title="pg_ident.conf"></a>pg_ident.conf</h3><p>​    用户映射文件，若客户端使用ident类型认证,就需要这里的映射关系了.<br>比如，服务器上有名为user1的操作系统用户，同时数据库上也有同名的数据库用户，user1登录操作系统后可以直接输入psql，以user1数据库用户身份登录数据库且不需密码。<br>很多初学者都会遇到psql -U username登录数据库却出现“username ident 认证失败”的错误，明明数据库用户已经createuser。<br>原因就在于此，使用了ident认证方式，却没有同名的操作系统用户或没有相应的映射用户。<br>解决方案：1、在pg_ident.conf中添加映射用户；2、改变认证方式。</p><p>CentOS7安装了PostgreSQL10和pgadmin4后,pgadmin4始终登陆数据库提示用户认证失败,<br>就是因为Linux下PostgreSQL默认的local认证方式是ident,而pg_ident.cong用户映射文件里并没有任何映射用户,<br>所以可以修改认证方式为md5,即可使用密码成功登陆了.</p><p>参考文档</p><ol><li><a href="https://www.cnblogs.com/sztom/p/9534323.html" target="_blank" rel="noopener">https://www.cnblogs.com/sztom/p/9534323.html</a></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;PostgreSQL11配置详解&lt;/p&gt;
&lt;h3 id=&quot;配置文件位置&quot;&gt;&lt;a href=&quot;#配置文件位置&quot; class=&quot;headerlink&quot; title=&quot;配置文件位置&quot;&gt;&lt;/a&gt;配置文件位置&lt;/h3&gt;&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;postgres=# select name, setting from pg_settings where category=&#39;File Locations&#39; ;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       name        |                setting                 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-------------------+----------------------------------------&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; config_file       | /var/lib/pgsql/11/data/postgresql.conf&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; data_directory    | /var/lib/pgsql/11/data&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; external_pid_file | &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; hba_file          | /var/lib/pgsql/11/data/pg_hba.conf&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; ident_file        | /var/lib/pgsql/11/data/pg_ident.conf&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(5 rows)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//使用root权限查找&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@api data]# find / -name pg_hba.conf&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/var/lib/pgsql/11/data/pg_hba.conf&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="数据库" scheme="https://www.cloudyslife.cn/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
      <category term="PostgreSQL" scheme="https://www.cloudyslife.cn/tags/PostgreSQL/"/>
    
  </entry>
  
  <entry>
    <title>Linux</title>
    <link href="https://www.cloudyslife.cn/2019/02/12/Linux/"/>
    <id>https://www.cloudyslife.cn/2019/02/12/Linux/</id>
    <published>2019-02-12T06:14:20.000Z</published>
    <updated>2019-03-19T04:10:29.601Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@10 ~]# cat /etc/redhat-release</span><br><span class="line">CentOS Linux release 7.2.1511 (Core)</span><br><span class="line">[root@10 ~]# uname -a</span><br><span class="line">Linux 10.16.93.179 3.10.0-327.10.1.el7.x86_64 #1 SMP Tue Feb 16 17:03:50 UTC 2016 x86_64 x86_64 x86_64 GNU/Linux</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class
      
    
    </summary>
    
      <category term="数据库" scheme="https://www.cloudyslife.cn/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
      <category term="Linux" scheme="https://www.cloudyslife.cn/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>PostgreSQL</title>
    <link href="https://www.cloudyslife.cn/2019/02/11/postgresql/"/>
    <id>https://www.cloudyslife.cn/2019/02/11/postgresql/</id>
    <published>2019-02-11T09:13:00.000Z</published>
    <updated>2019-03-19T04:10:29.605Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Centos-7安装PostgreSQL"><a href="#Centos-7安装PostgreSQL" class="headerlink" title="Centos 7安装PostgreSQL"></a>Centos 7安装PostgreSQL</h3><p><a href="https://www.postgresql.org/download/linux/redhat/" target="_blank" rel="noopener">官方安装说明</a> </p><p>参考博客<a href="https://www.cnblogs.com/stulzq/p/7766409.html" target="_blank" rel="noopener">Centos 7 安装 PostgreSQL</a></p><a id="more"></a><ol><li><p>安装存储库</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install https://download.postgresql.org/pub/repos/yum/11/redhat/rhel-7-x86_64/pgdg-centos11-11-2.noarch.rpm</span><br></pre></td></tr></table></figure></li><li><p>安装客户端</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install postgresql11</span><br></pre></td></tr></table></figure></li><li><p>安装服务端</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install postgresql11-server</span><br></pre></td></tr></table></figure></li><li><p>验证是否安装成功</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -aq| grep postgres</span><br></pre></td></tr></table></figure><p><img src="/images/TIM截图20190211101512.png" alt="成功输出"></p></li><li><p>初始化数据库</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/pgsql-11/bin/postgresql-11-setup initdb</span><br></pre></td></tr></table></figure></li><li><p>开机自动启动</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable postgresql-11</span><br><span class="line">systemctl start postgresql-11</span><br></pre></td></tr></table></figure></li><li><p>修改密码<br>postgresql安装完成后，会在系统中创建默认用户postgres，没有默认密码。</p><p>登录</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">su postgres //切换用户，执行后提示符会变为 '-bash-4.2$'</span><br><span class="line">psql postgres //登录数据库，执行后提示符变为 'postgres=#' psql -U postgres -p 8998</span><br></pre></td></tr></table></figure><p>创建密码</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">postgres=# \password postgres  #给postgres用户设置密码 </span><br><span class="line">Enter new password:             #输入用户密码</span><br><span class="line">Enter it again:                 #再次输入密码</span><br><span class="line">\q  //退出数据库</span><br></pre></td></tr></table></figure></li><li><p>开启远程访问</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vim /var/lib/pgsql/11/data/postgresql.conf</span><br><span class="line">修改#listen_addresses = 'localhost'  为  listen_addresses = '*'</span><br><span class="line">当然，此处‘*’也可以改为任何你想开放的服务器IP</span><br></pre></td></tr></table></figure></li><li><p>信任连接</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vim /var/lib/pgsql/11/data/pg_hba.conf</span><br><span class="line"><span class="meta">#</span> IPv4 local connections:</span><br><span class="line">host    all             all             127.0.0.1/32            ident</span><br><span class="line">允许所有ip通过密码连接</span><br><span class="line">host    all             all             0.0.0.0/0               md5</span><br></pre></td></tr></table></figure></li><li><p>配置防火墙</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --permanent --add-port=5432/tcp  </span><br><span class="line">firewall-cmd --permanent --add-port=80/tcp  </span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure><p>  最后确保端口5432可以在外部访问到，比如，需要开通阿里云服务器暴露的端口。</p></li><li><p>重启服务</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart postgresql-11</span><br></pre></td></tr></table></figure></li><li><p>使用navicat连接数据库</p></li></ol><h3 id="Docker安装PostgreSQL"><a href="#Docker安装PostgreSQL" class="headerlink" title="Docker安装PostgreSQL"></a>Docker安装PostgreSQL</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker pull postgres</span><br><span class="line">docker run --name postgres01 -e POSTGRES_PASSWORD=postgres -p 5432:5432 -d --restart=always postgres</span><br></pre></td></tr></table></figure><h3 id="备份与恢复"><a href="#备份与恢复" class="headerlink" title="备份与恢复"></a>备份与恢复</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">pg_basebackup -F p -D /var/lib/pgsql/11/backups  -v -h 40.73.35.55 -p 8998 -U postgres -W</span><br><span class="line">Password:</span><br><span class="line"></span><br><span class="line">pg_basebackup -R -D /var/lib/pgsql/11/data  -h 40.73.35.55 -p 8998 -U postgres -w</span><br><span class="line">-R 选项可以自动生成recovery.conf文件</span><br><span class="line"></span><br><span class="line">pg_basebackup -h 40.73.35.55 -p 8998  -U postgres -w -D /var/lib/pgsql/11/data -X stream -P</span><br></pre></td></tr></table></figure><p><a href="https://www.jianshu.com/p/77f07af6ca4b" target="_blank" rel="noopener">postgresql 高可用集群搭建资料</a></p><p><a href="http://www.uml.org.cn/zjjs/201605031.asp" target="_blank" rel="noopener">PostgresSQL HA高可用架构实战</a></p><p>HA 方案</p><pre><code>1. 共享存储2. drbd3. 基于流复制</code></pre><h4 id="流复制"><a href="#流复制" class="headerlink" title="流复制"></a>流复制</h4><ul><li><p>异步流复制</p><p>​    异步流复制的中心思想是：主库上提交事务时不需要等待备库接收WAL日志流并写入到备库WAL日志文件时便返回成功，因此异步流复制的TPS会相对同步流复制要高，延迟更低。</p><p>参考博客</p><pre><code>1. https://www.cnblogs.com/sunshine-long/p/9059695.html2. https://lihaoquan.me/2018/9/29/postgresql-master-slave-ha.html</code></pre><p>验证是否部署成功</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">su - postgres</span><br><span class="line">psql -U postgres -p 8998</span><br><span class="line">//主服务器</span><br><span class="line">postgres=# select pg_is_in_recovery();</span><br><span class="line">pg_is_in_recovery</span><br><span class="line">-------------------</span><br><span class="line">f //f表示主</span><br><span class="line">(1 row)</span><br><span class="line">//备服务器</span><br><span class="line">postgres=# select pg_is_in_recovery();</span><br><span class="line">pg_is_in_recovery</span><br><span class="line">-------------------</span><br><span class="line">t //t表示备</span><br><span class="line">(1 row)</span><br><span class="line"></span><br><span class="line">//主服务器，async表示异步流复制</span><br><span class="line">postgres=# select client_addr,application_name,sync_state from pg_stat_replication;</span><br><span class="line"></span><br><span class="line">client_addr  | sync_state </span><br><span class="line">---------------+------------</span><br><span class="line">139.219.6.177 | async</span><br><span class="line">(1 row)</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>同步流复制</p><p>事务同步</p><p>只需修改master</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">vim postgresql.conf</span><br><span class="line">synchronous_standby_names = '*'</span><br><span class="line">synchronous_commit = on</span><br><span class="line"></span><br><span class="line">postgres=# select client_addr,application_name,sync_state from pg_stat_replication;</span><br><span class="line"> client_addr  | application_name | sync_state </span><br><span class="line">---------------+------------------+------------</span><br><span class="line"> 139.219.6.177 | walreceiver      | sync</span><br><span class="line">(1 row)</span><br></pre></td></tr></table></figure></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Centos-7安装PostgreSQL&quot;&gt;&lt;a href=&quot;#Centos-7安装PostgreSQL&quot; class=&quot;headerlink&quot; title=&quot;Centos 7安装PostgreSQL&quot;&gt;&lt;/a&gt;Centos 7安装PostgreSQL&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;https://www.postgresql.org/download/linux/redhat/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;官方安装说明&lt;/a&gt; &lt;/p&gt;
&lt;p&gt;参考博客&lt;a href=&quot;https://www.cnblogs.com/stulzq/p/7766409.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Centos 7 安装 PostgreSQL&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="数据库" scheme="https://www.cloudyslife.cn/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
      <category term="PostgreSQL" scheme="https://www.cloudyslife.cn/tags/PostgreSQL/"/>
    
  </entry>
  
  <entry>
    <title>Docker</title>
    <link href="https://www.cloudyslife.cn/2019/02/11/docker%E7%9B%B8%E5%85%B3/"/>
    <id>https://www.cloudyslife.cn/2019/02/11/docker相关/</id>
    <published>2019-02-11T09:12:01.000Z</published>
    <updated>2019-03-19T04:10:29.603Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-Centos7安装docker"><a href="#1-Centos7安装docker" class="headerlink" title="1. Centos7安装docker"></a>1. Centos7安装docker</h3><a id="more"></a><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">yum install docker</span><br><span class="line">systemctl start docker</span><br><span class="line">systemctl enable docker //开机启动</span><br><span class="line">systemctl stop docker</span><br><span class="line">[root@rd-test /]# docker version</span><br><span class="line">Client:</span><br><span class="line"> Version:         1.13.1</span><br><span class="line"> API version:     1.26</span><br><span class="line"> Package version: docker-1.13.1-88.git07f3374.el7.centos.x86_64</span><br><span class="line"> Go version:      go1.9.4</span><br><span class="line"> Git commit:      07f3374/1.13.1</span><br><span class="line"> Built:           Fri Dec  7 16:13:51 2018</span><br><span class="line"> OS/Arch:         linux/amd64</span><br><span class="line"></span><br><span class="line">Server:</span><br><span class="line"> Version:         1.13.1</span><br><span class="line"> API version:     1.26 (minimum version 1.12)</span><br><span class="line"> Package version: docker-1.13.1-88.git07f3374.el7.centos.x86_64</span><br><span class="line"> Go version:      go1.9.4</span><br><span class="line"> Git commit:      07f3374/1.13.1</span><br><span class="line"> Built:           Fri Dec  7 16:13:51 2018</span><br><span class="line"> OS/Arch:         linux/amd64</span><br><span class="line"> Experimental:    false</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;1-Centos7安装docker&quot;&gt;&lt;a href=&quot;#1-Centos7安装docker&quot; class=&quot;headerlink&quot; title=&quot;1. Centos7安装docker&quot;&gt;&lt;/a&gt;1. Centos7安装docker&lt;/h3&gt;
    
    </summary>
    
      <category term="服务器" scheme="https://www.cloudyslife.cn/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    
    
      <category term="Docker" scheme="https://www.cloudyslife.cn/tags/Docker/"/>
    
  </entry>
  
  <entry>
    <title>站点配置更新</title>
    <link href="https://www.cloudyslife.cn/2019/01/30/hexo%E9%85%8D%E7%BD%AE%E6%9B%B4%E6%96%B0/"/>
    <id>https://www.cloudyslife.cn/2019/01/30/hexo配置更新/</id>
    <published>2019-01-30T02:23:00.000Z</published>
    <updated>2019-03-19T04:10:29.604Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>本文转自 <a href="https://www.donlex.cn/archives/undefined.html" target="_blank" rel="noopener">https://www.donlex.cn/archives/undefined.html</a></p><p>最近更新了一下站点的一些配置，让网站的趣味性有了一定的提升。主要做了一下几点更新。</p><ol><li>添加雪花效果</li><li>添加天气插件</li><li>加入CNZZ统计 下面将详细分享一下过程经历！</li></ol><a id="more"></a><h3 id="添加雪花效果"><a href="#添加雪花效果" class="headerlink" title="添加雪花效果"></a>添加雪花效果</h3><p>实现方法：在 <code>\themes\next\source\js\src</code> 目录下新建一个 <code>snow.js</code> 文件，复制粘贴一下代码。</p><p>其中样式一是六边形的雪片，样式二是小圆点的雪花，其自行调试，选择喜欢的样式。</p><h4 id="样式一"><a href="#样式一" class="headerlink" title="样式一"></a>样式一</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">/*样式一*/</span><br><span class="line">(function($)&#123;</span><br><span class="line">$.fn.snow = function(options)&#123;</span><br><span class="line">var $flake = $(&apos;&lt;div id=&quot;snowbox&quot; /&gt;&apos;).css(&#123;&apos;position&apos;: &apos;absolute&apos;,&apos;z-index&apos;:&apos;9999&apos;, &apos;top&apos;: &apos;-50px&apos;&#125;).html(&apos;&amp;#10052;&apos;),</span><br><span class="line">documentHeight = $(document).height(),</span><br><span class="line">documentWidth= $(document).width(),</span><br><span class="line">defaults = &#123;</span><br><span class="line">minSize: 10,</span><br><span class="line">maxSize: 20,</span><br><span class="line">newOn: 1000,</span><br><span class="line">flakeColor: &quot;#AFDAEF&quot; /* 此处可以定义雪花颜色，若要白色可以改为#FFFFFF */</span><br><span class="line">&#125;,</span><br><span class="line">options= $.extend(&#123;&#125;, defaults, options);</span><br><span class="line">var interval= setInterval( function()&#123;</span><br><span class="line">var startPositionLeft = Math.random() * documentWidth - 100,</span><br><span class="line">startOpacity = 0.5 + Math.random(),</span><br><span class="line">sizeFlake = options.minSize + Math.random() * options.maxSize,</span><br><span class="line">endPositionTop = documentHeight - 200,</span><br><span class="line">endPositionLeft = startPositionLeft - 500 + Math.random() * 500,</span><br><span class="line">durationFall = documentHeight * 10 + Math.random() * 5000;</span><br><span class="line">$flake.clone().appendTo(&apos;body&apos;).css(&#123;</span><br><span class="line">left: startPositionLeft,</span><br><span class="line">opacity: startOpacity,</span><br><span class="line">&apos;font-size&apos;: sizeFlake,</span><br><span class="line">color: options.flakeColor</span><br><span class="line">&#125;).animate(&#123;</span><br><span class="line">top: endPositionTop,</span><br><span class="line">left: endPositionLeft,</span><br><span class="line">opacity: 0.2</span><br><span class="line">&#125;,durationFall,&apos;linear&apos;,function()&#123;</span><br><span class="line">$(this).remove()</span><br><span class="line">&#125;);</span><br><span class="line">&#125;, options.newOn);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;)(jQuery);</span><br><span class="line">$(function()&#123;</span><br><span class="line">    $.fn.snow(&#123; </span><br><span class="line">    minSize: 5, /* 定义雪花最小尺寸 */</span><br><span class="line">    maxSize: 50,/* 定义雪花最大尺寸 */</span><br><span class="line">    newOn: 300  /* 定义密集程度，数字越小越密集 */</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h4 id="样式二"><a href="#样式二" class="headerlink" title="样式二"></a>样式二</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><span class="line">/*样式二*/</span><br><span class="line">/* 控制下雪 */</span><br><span class="line">function snowFall(snow) &#123;</span><br><span class="line">    /* 可配置属性 */</span><br><span class="line">    snow = snow || &#123;&#125;;</span><br><span class="line">    this.maxFlake = snow.maxFlake || 200;   /* 最多片数 */</span><br><span class="line">    this.flakeSize = snow.flakeSize || 10;  /* 雪花形状 */</span><br><span class="line">    this.fallSpeed = snow.fallSpeed || 1;   /* 坠落速度 */</span><br><span class="line">&#125;</span><br><span class="line">/* 兼容写法 */</span><br><span class="line">requestAnimationFrame = window.requestAnimationFrame ||</span><br><span class="line">    window.mozRequestAnimationFrame ||</span><br><span class="line">    window.webkitRequestAnimationFrame ||</span><br><span class="line">    window.msRequestAnimationFrame ||</span><br><span class="line">    window.oRequestAnimationFrame ||</span><br><span class="line">    function(callback) &#123; setTimeout(callback, 1000 / 60); &#125;;</span><br><span class="line"></span><br><span class="line">cancelAnimationFrame = window.cancelAnimationFrame ||</span><br><span class="line">    window.mozCancelAnimationFrame ||</span><br><span class="line">    window.webkitCancelAnimationFrame ||</span><br><span class="line">    window.msCancelAnimationFrame ||</span><br><span class="line">window.oCancelAnimationFrame;</span><br><span class="line">/* 开始下雪 */</span><br><span class="line">snowFall.prototype.start = function()&#123;</span><br><span class="line">    /* 创建画布 */</span><br><span class="line">    snowCanvas.apply(this);</span><br><span class="line">    /* 创建雪花形状 */</span><br><span class="line">    createFlakes.apply(this);</span><br><span class="line">    /* 画雪 */</span><br><span class="line">    drawSnow.apply(this)</span><br><span class="line">&#125;</span><br><span class="line">/* 创建画布 */</span><br><span class="line">function snowCanvas() &#123;</span><br><span class="line">    /* 添加Dom结点 */</span><br><span class="line">    var snowcanvas = document.createElement(&quot;canvas&quot;);</span><br><span class="line">    snowcanvas.id = &quot;snowfall&quot;;</span><br><span class="line">    snowcanvas.width = window.innerWidth;</span><br><span class="line">    snowcanvas.height = document.body.clientHeight;</span><br><span class="line">    snowcanvas.setAttribute(&quot;style&quot;, &quot;position:absolute; top: 0; left: 0; z-index: 1; pointer-events: none;&quot;);</span><br><span class="line">    document.getElementsByTagName(&quot;body&quot;)[0].appendChild(snowcanvas);</span><br><span class="line">    this.canvas = snowcanvas;</span><br><span class="line">    this.ctx = snowcanvas.getContext(&quot;2d&quot;);</span><br><span class="line">    /* 窗口大小改变的处理 */</span><br><span class="line">    window.onresize = function() &#123;</span><br><span class="line">        snowcanvas.width = window.innerWidth;</span><br><span class="line">        /* snowcanvas.height = window.innerHeight */</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">/* 雪运动对象 */</span><br><span class="line">function flakeMove(canvasWidth, canvasHeight, flakeSize, fallSpeed) &#123;</span><br><span class="line">    this.x = Math.floor(Math.random() * canvasWidth);   /* x坐标 */</span><br><span class="line">    this.y = Math.floor(Math.random() * canvasHeight);  /* y坐标 */</span><br><span class="line">    this.size = Math.random() * flakeSize + 2;          /* 形状 */</span><br><span class="line">    this.maxSize = flakeSize;                           /* 最大形状 */</span><br><span class="line">    this.speed = Math.random() * 1 + fallSpeed;         /* 坠落速度 */</span><br><span class="line">    this.fallSpeed = fallSpeed;                         /* 坠落速度 */</span><br><span class="line">    this.velY = this.speed;                             /* Y方向速度 */</span><br><span class="line">    this.velX = 0;                                      /* X方向速度 */</span><br><span class="line">    this.stepSize = Math.random() / 30;                 /* 步长 */</span><br><span class="line">    this.step = 0                                       /* 步数 */</span><br><span class="line">&#125;</span><br><span class="line">flakeMove.prototype.update = function() &#123;</span><br><span class="line">    var x = this.x,</span><br><span class="line">        y = this.y;</span><br><span class="line">    /* 左右摆动(余弦) */</span><br><span class="line">    this.velX *= 0.98;</span><br><span class="line">    if (this.velY &lt;= this.speed) &#123;</span><br><span class="line">        this.velY = this.speed</span><br><span class="line">    &#125;</span><br><span class="line">    this.velX += Math.cos(this.step += .05) * this.stepSize;</span><br><span class="line"></span><br><span class="line">    this.y += this.velY;</span><br><span class="line">    this.x += this.velX;</span><br><span class="line">    /* 飞出边界的处理 */</span><br><span class="line">    if (this.x &gt;= canvas.width || this.x &lt;= 0 || this.y &gt;= canvas.height || this.y &lt;= 0) &#123;</span><br><span class="line">        this.reset(canvas.width, canvas.height)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">/* 飞出边界-放置最顶端继续坠落 */</span><br><span class="line">flakeMove.prototype.reset = function(width, height) &#123;</span><br><span class="line">    this.x = Math.floor(Math.random() * width);</span><br><span class="line">    this.y = 0;</span><br><span class="line">    this.size = Math.random() * this.maxSize + 2;</span><br><span class="line">    this.speed = Math.random() * 1 + this.fallSpeed;</span><br><span class="line">    this.velY = this.speed;</span><br><span class="line">    this.velX = 0;</span><br><span class="line">&#125;;</span><br><span class="line">// 渲染雪花-随机形状（此处可修改雪花颜色！！！）</span><br><span class="line">flakeMove.prototype.render = function(ctx) &#123;</span><br><span class="line">    var snowFlake = ctx.createRadialGradient(this.x, this.y, 0, this.x, this.y, this.size);</span><br><span class="line">    snowFlake.addColorStop(0, &quot;rgba(255, 255, 255, 0.9)&quot;);  /* 此处是雪花颜色，默认是白色 */</span><br><span class="line">    snowFlake.addColorStop(.5, &quot;rgba(255, 255, 255, 0.5)&quot;); /* 若要改为其他颜色，请自行查 */</span><br><span class="line">    snowFlake.addColorStop(1, &quot;rgba(255, 255, 255, 0)&quot;);    /* 找16进制的RGB 颜色代码。 */</span><br><span class="line">    ctx.save();</span><br><span class="line">    ctx.fillStyle = snowFlake;</span><br><span class="line">    ctx.beginPath();</span><br><span class="line">    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);</span><br><span class="line">    ctx.fill();</span><br><span class="line">    ctx.restore();</span><br><span class="line">&#125;;</span><br><span class="line">/* 创建雪花-定义形状 */</span><br><span class="line">function createFlakes() &#123;</span><br><span class="line">    var maxFlake = this.maxFlake,</span><br><span class="line">        flakes = this.flakes = [],</span><br><span class="line">        canvas = this.canvas;</span><br><span class="line">    for (var i = 0; i &lt; maxFlake; i++) &#123;</span><br><span class="line">        flakes.push(new flakeMove(canvas.width, canvas.height, this.flakeSize, this.fallSpeed))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">/* 画雪 */</span><br><span class="line">function drawSnow() &#123;</span><br><span class="line">    var maxFlake = this.maxFlake,</span><br><span class="line">        flakes = this.flakes;</span><br><span class="line">    ctx = this.ctx, canvas = this.canvas, that = this;</span><br><span class="line">    /* 清空雪花 */</span><br><span class="line">    ctx.clearRect(0, 0, canvas.width, canvas.height);</span><br><span class="line">    for (var e = 0; e &lt; maxFlake; e++) &#123;</span><br><span class="line">        flakes[e].update();</span><br><span class="line">        flakes[e].render(ctx);</span><br><span class="line">    &#125;</span><br><span class="line">    /*  一帧一帧的画 */</span><br><span class="line">    this.loop = requestAnimationFrame(function() &#123;</span><br><span class="line">        drawSnow.apply(that);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line">/* 调用及控制方法 */</span><br><span class="line">var snow = new snowFall(&#123;maxFlake:60&#125;);</span><br><span class="line">snow.start();</span><br></pre></td></tr></table></figure><p>然后在 <code>\themes\next\layout\_layout.swig</code> 文件里<code>&lt;body&gt;&lt;/body&gt;</code>内部引用即可：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 雪花特效 --&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">  var windowWidth = $(window).width();</span><br><span class="line">  if (windowWidth &gt; 480) &#123;</span><br><span class="line">    document.write(&apos;&lt;script type=&quot;text/javascript&quot; src=&quot;/js/src/snow.js&quot;&gt;&lt;\/script&gt;&apos;);</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>请确保在你添加的代码上面已经引入了JQ，否则你还需要导入jq</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;//libs.baidu.com/jquery/1.8.3/jquery.min.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="添加天气插件"><a href="#添加天气插件" class="headerlink" title="添加天气插件"></a>添加天气插件</h3><p>网上有很多的天气插件，找了很久发现心知天气非常不错。<br>获取地址：<a href="https://www.seniverse.com/widget/get" target="_blank" rel="noopener">https://www.seniverse.com/widget/get</a></p><p>使用心知天气有两点必备条件：</p><ol><li>注册心知天气账号</li><li>博客绑定了域名</li></ol><p>如果你没有域名但是可以通过IP地址进行访问也是可以添加成功的。</p><p>下面说一下详细的过程：</p><h4 id="配置插件"><a href="#配置插件" class="headerlink" title="配置插件"></a>配置插件</h4><p>有账号之后,登录根据自己喜好配置插件。心知天气的自动适配功能非常的不错。<br><a href="https://i.loli.net/2019/01/07/5c32f266e786e.png" target="_blank" rel="noopener"><img src="https://i.loli.net/2019/01/07/5c32f266e786e.png" alt="配置心知.PNG"></a></p><h4 id="安装代码"><a href="#安装代码" class="headerlink" title="安装代码"></a>安装代码</h4><p>选择好配置之后，就可以获取心知的插件代码。获取到代码之后，在<code>\themes\next\layout\_partials\head\custom-head.swig</code>中添加获取的代码。之后就可以部署到Github上了。</p><p>吐槽一下，加载数独真的是很慢，特别是在移动端中，如果你希望你的站点访问速度快一点，建议还是不要为了功能，而放弃用户体验。</p><h3 id="添加CNZZ统计"><a href="#添加CNZZ统计" class="headerlink" title="添加CNZZ统计"></a>添加CNZZ统计</h3><p>刚开始弄NexT主题的时候，对一些配置还不是很明白，所以一直都不敢弄。<br>今天总算有点精神，就把友盟的统计给加上了。之前一直都是用不蒜子的统计，但是不蒜子统计的内容太过简单了，不能够看到其他的一些数据。</p><p>友盟+ 传送门：<a href="https://passport.umeng.com/login?appId=cnzz" target="_blank" rel="noopener">https://passport.umeng.com/login?appId=cnzz</a></p><h4 id="配置站点信息"><a href="#配置站点信息" class="headerlink" title="配置站点信息"></a>配置站点信息</h4><p>登录之后，选择右上角的添加站点，配置好你的站点信息</p><p><a href="https://i.loli.net/2019/01/07/5c32f21391b50.png" target="_blank" rel="noopener"><img src="https://i.loli.net/2019/01/07/5c32f21391b50.png" alt="cnzz添加站点.PNG"></a></p><h4 id="获取代码"><a href="#获取代码" class="headerlink" title="获取代码"></a>获取代码</h4><p>获取友盟提供给你的代码，友盟提供了很多的样式，随便复制一份就行。<br><a href="https://i.loli.net/2019/01/07/5c32f22e7156f.png" target="_blank" rel="noopener"><img src="https://i.loli.net/2019/01/07/5c32f22e7156f.png" alt="cnzz代码.PNG"></a></p><p>在<code>\themes\next\layout\_third-party\analytics\cnzz-analytics.swig</code>中将原来的代码全部删除，复制下面的代码：<br><em>ps：如果没有该文件，请自行创建然后复制修改下面的代码</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;% if theme.cnzz_siteid %&#125;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">&lt;!-- 填写你的友盟代码 --&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">var cnzz_protocol = ((&quot;https:&quot; == document.location.protocol) ? &quot; https://&quot; : &quot; http://&quot;);</span><br><span class="line">document.write(unescape(&quot;%3Cspan id=&apos;cnzz_stat_icon_12&apos;%3E%3C/span%3E%3Cscript </span><br><span class="line">src=&apos;&quot; + cnzz_protocol + &quot;s19.cnzz.com/z_stat.php%3Fid%3D12%2show%3Dpic&apos; </span><br><span class="line">type=&apos;text/javascript&apos;%3E%3C/script%3E&quot;));</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;!-- 你的友盟代码 end --&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure><h4 id="修改配置文件"><a href="#修改配置文件" class="headerlink" title="修改配置文件"></a>修改配置文件</h4><p>添加了代码之后，还需要修改next的配置文件才能够生效。注意是<strong>主题配置文件</strong><br>打开<code>\themes\next</code>目录下的<code>_config.yml</code>，按<code>ctrl + F</code>搜索<code>CNZZ</code>,找到之后将注释的内容打开，并设置成true，注意空格</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># CNZZ count</span><br><span class="line">cnzz_siteid: true</span><br></pre></td></tr></table></figure><p>这样就可以成功的使用CNZZ进行统计了。建议使用<code>hexo s</code>在本地测试，看是否有问题再部署上去。</p><h4 id="附赠"><a href="#附赠" class="headerlink" title="附赠"></a>附赠</h4><p>在我的博客中，部署友盟上去之后，发现移动端的footer顶上去了。<br><a href="https://i.loli.net/2019/01/07/5c32f24ab04e9.png" target="_blank" rel="noopener"><img src="https://i.loli.net/2019/01/07/5c32f24ab04e9.png" alt="css.PNG"></a><br>哭死: ( 写博客的时候，才发现不蒜子的统计居然变少了，原来不蒜子对域名前加www和不加www的网站是区分统计的。。。<br>算了，反正是佛系博主，随缘吧。。。。</p><p>打开<code>\themes\next\source\css\_custom</code>目录下的<code>custom.styl</code>，添加以下代码：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// Custom styles.</span><br><span class="line">//mobile style footer</span><br><span class="line">@media (max-width: 767px)</span><br><span class="line"> .content-wrap &#123;</span><br><span class="line">    width: 100%;</span><br><span class="line">    padding: 20px;</span><br><span class="line">    min-height: auto;</span><br><span class="line">    margin-bottom: 30px;</span><br><span class="line">    border-radius: initial;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>注意<code>.content-wrap</code>前面有一个空格，一定要添加，否则博客的样式就全乱了。</p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;p&gt;本文转自 &lt;a href=&quot;https://www.donlex.cn/archives/undefined.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://www.donlex.cn/archives/undefined.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;最近更新了一下站点的一些配置，让网站的趣味性有了一定的提升。主要做了一下几点更新。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;添加雪花效果&lt;/li&gt;
&lt;li&gt;添加天气插件&lt;/li&gt;
&lt;li&gt;加入CNZZ统计 下面将详细分享一下过程经历！&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
      <category term="前端" scheme="https://www.cloudyslife.cn/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="Hexo" scheme="https://www.cloudyslife.cn/tags/Hexo/"/>
    
      <category term="NexT" scheme="https://www.cloudyslife.cn/tags/NexT/"/>
    
  </entry>
  
</feed>
